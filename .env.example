# =============================================================================
# Adaptive Learning Decision Engine - Environment Configuration
# =============================================================================
# Copy this file to .env for development or .env.production for production
# IMPORTANT: Change all default values in production!
# =============================================================================

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
# PostgreSQL connection string for cloud storage
DATABASE_URL=postgresql://postgres:postgres@db:5432/adaptive_learning

# SQLite connection string for offline storage
SQLITE_DATABASE_URL=sqlite:///./local.db

# PostgreSQL credentials
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=adaptive_learning
POSTGRES_HOST=db
POSTGRES_PORT=5432

# -----------------------------------------------------------------------------
# JWT Authentication Configuration
# -----------------------------------------------------------------------------
# CRITICAL: Generate a strong random key for production!
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=your-secret-key-change-this-in-production

# JWT algorithm (HS256 recommended)
ALGORITHM=HS256

# Token expiration time in minutes (1440 = 24 hours)
ACCESS_TOKEN_EXPIRE_MINUTES=1440

# -----------------------------------------------------------------------------
# API Configuration
# -----------------------------------------------------------------------------
# Backend API host and port
API_HOST=0.0.0.0
API_PORT=8000

# CORS allowed origins (JSON array format)
# Development: ["http://localhost:3000"]
# Production: ["https://yourdomain.com"]
BACKEND_CORS_ORIGINS=["http://localhost:3000"]

# -----------------------------------------------------------------------------
# Frontend Configuration
# -----------------------------------------------------------------------------
# Backend API URL for frontend to connect to
# Development: http://localhost:8000/api
# Production: https://yourdomain.com/api
NEXT_PUBLIC_API_URL=http://localhost:8000/api

# -----------------------------------------------------------------------------
# Environment
# -----------------------------------------------------------------------------
# Application environment: development, staging, production
ENVIRONMENT=development

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
# Maximum API requests per minute per IP address
RATE_LIMIT_PER_MINUTE=60

# -----------------------------------------------------------------------------
# Sync Configuration
# -----------------------------------------------------------------------------
# Interval for checking and triggering offline-online sync (seconds)
SYNC_INTERVAL_SECONDS=30

# Maximum number of retry attempts for failed sync operations
SYNC_RETRY_MAX_ATTEMPTS=5

# -----------------------------------------------------------------------------
# Logging Configuration (Optional)
# -----------------------------------------------------------------------------
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Log format: json, text
LOG_FORMAT=text

# -----------------------------------------------------------------------------
# Performance Configuration (Optional)
# -----------------------------------------------------------------------------
# Number of Uvicorn workers (production only, default: 4)
# Set to number of CPU cores for optimal performance
WORKERS=4

# Database connection pool size
DB_POOL_SIZE=10

# Database connection pool max overflow
DB_POOL_MAX_OVERFLOW=20

# -----------------------------------------------------------------------------
# Security Configuration (Optional)
# -----------------------------------------------------------------------------
# Enable HTTPS redirect (production only)
FORCE_HTTPS=false

# Session cookie secure flag (set to true in production with HTTPS)
SESSION_COOKIE_SECURE=false

# Session cookie same-site policy: lax, strict, none
SESSION_COOKIE_SAMESITE=lax
